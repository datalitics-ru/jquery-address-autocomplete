(()=>{var e={77:(e,t,n)=>{var s,o,i;!function(a){"use strict";o=[n(311)],s=function(e){var t={escapeRegExChars:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},clearText:function(e){return e.replace(/(?:(?![\t-\r 0-9a-z\xA0\u017F\u0430-\u044F\u0451\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u212A\u3000\uFEFF])[\s\S])+/gim," ").replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/gim," ")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n=27,s=9,o=13,i=38,a=39,r=40,l=e.noop;function u(t,n){var s=this;s.element=t,s.el=e(t),s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.timeoutId=null,s.cachedResponse={},s.onChangeTimeout=null,s.onChange=null,s.processContainer=null,s.suggestionsContainer=null,s.noSuggestionsContainer=null,s.options=e.extend(!0,{},u.defaults,n),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,s.initialize(),s.setOptions(n)}u.utils=t,e.Autocomplete=u,u.defaults={autoSelectFirst:!1,showLogo:!0,appendTo:"body",addressType:"adm",onSelect:null,onHint:null,width:"auto",minChars:2,maxHeight:700,deferRequestBy:0,formatResult:function(e,n){if(!n)return e.address_value;var s=t.clearText(n).split(" ");return e.address_value.replace(new RegExp("("+s.join("|")+")","gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(e,t){return'<div class="autocomplete-group">'+t+"</div>"},getGroup:null,delimiter:null,zIndex:9999,noCache:!1,onSearchStart:l,onSearchComplete:l,onSearchError:l,preserveInput:!1,containerClass:"dlt-autocomplete-suggestions",itemsClass:"dlt-autocomplete-items",logoClass:"dlt-logo",inputClass:"dlt-autocomplete-input",tabDisabled:!1,currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!0,noSuggestionNotice:"<p>Неизвестный&nbsp;адрес.<br>Попробуйте&nbsp;другой.</p>",orientation:"bottom",forceFixPosition:!1},u.prototype={initialize:function(){var t,n=this,s="."+n.classes.suggestion,o=n.classes.selected,i=n.options;n.element.setAttribute("autocomplete","off"),n.element.classList.add(i.inputClass),n.noSuggestionsContainer=e('<div class="dlt-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=u.utils.createNode(i.containerClass),t=e(n.suggestionsContainer);var a=document.createElement("div");a.classList.add(i.itemsClass),t.append(a);var r=document.createElement("div");if(r.classList.add("dlt-process-icon"),r.innerHTML="<div></div>",t.append(r),n.processContainer=e(r),i.showLogo){var l=document.createElement("div");l.classList.add(i.logoClass),l.innerHTML='<a href="https://datalitics.ru"><img alt="Даталитикс" src="https://api.datalitics.ru/assets/logo_color_100.png"></a>',t.append(l)}t.appendTo(i.appendTo||"body"),"auto"!==i.width&&t.css("width",i.width),t.on("mouseover.autocomplete",s,(function(){n.activate(e(this).data("index"))})),t.on("mouseout.autocomplete",(function(){n.selectedIndex=-1,t.children("."+o).removeClass(o)})),t.on("click.autocomplete",s,(function(){n.select(e(this).data("index"))})),t.on("click.autocomplete",(function(){clearTimeout(n.blurTimeoutId)})),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",(function(e){n.onKeyPress(e)})),n.el.on("keyup.autocomplete",(function(e){n.onKeyUp(e)})),n.el.on("blur.autocomplete",(function(){n.onBlur()})),n.el.on("focus.autocomplete",(function(){n.onFocus()})),n.el.on("change.autocomplete",(function(e){n.onKeyUp(e)})),n.el.on("input.autocomplete",(function(e){n.onKeyUp(e)}))},onFocus:function(){var e=this;e.disabled||(e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange())},onBlur:function(){var t=this,n=t.options,s=t.el.val(),o=t.getQuery(s);t.blurTimeoutId=setTimeout((function(){t.containerHide(),t.selection&&t.currentValue!==o&&(n.onInvalidateSelection||e.noop).call(t.element)}),200)},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var n=this,s=e.extend({},n.options,t);s.orientation=n.validateOrientation(s.orientation,"bottom"),e(n.suggestionsContainer).css({"max-height":s.maxHeight+"px",width:s.width+"px","z-index":s.zIndex}),this.options=s},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearTimeout(e.onChangeTimeout),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,n=e(t.suggestionsContainer),s=n.parent().get(0);if(s===document.body||t.options.forceFixPosition){var o=t.options.orientation,i=n.outerHeight(),a=t.el.outerHeight(),r=t.el.offset(),l={top:r.top-1,left:r.left};if("auto"===o){var u=e(window).height(),c=e(window).scrollTop(),d=-c+r.top-i,g=c+u-(r.top+a+i);o=Math.max(d,g)===d?"top":"bottom"}if(l.top+="top"===o?-i:a,s!==document.body){var p,h=n.css("opacity");t.visible||n.css("opacity",0).show(),p=n.offsetParent().offset(),l.top-=p.top,l.top+=s.scrollTop,l.left-=p.left,t.visible||n.css("opacity",h).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()+"px"),n.css(l)}},isCursorAtEnd:function(){var e,t=this.el.val().length,n=this.element.selectionStart;return"number"==typeof n?n===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==r||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.el.val(t.currentValue),t.containerHide();break;case a:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case s:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.containerHide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case o:if(-1===t.selectedIndex)return void t.containerHide();t.select(t.selectedIndex);break;case i:t.moveUp();break;case r:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case i:case r:return}clearTimeout(t.onChangeTimeout),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeTimeout=setTimeout((function(){t.onValueChange()}),t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)this.ignoreValueChange=!1;else{var t=this,n=t.options,s=t.el.val(),o=t.getQuery(s);t.selection&&t.currentValue!==o&&(t.selection=null,(n.onInvalidateSelection||e.noop).call(t.element)),clearTimeout(t.onChangeTimeout),t.currentValue=s,t.selectedIndex=-1,n.triggerSelectOnValidInput&&t.isExactMatch(o)?t.select(0):o.length<n.minChars?t.containerHide():t.getSuggestions(o)}},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var n,s=this.options.delimiter;return s?(n=t.split(s),e.trim(n[n.length-1])):t},getSuggestions:function(t){var n,s,o=e(this.suggestionsContainer),i=this,a=i.options,r="https://api.datalitics.ru/v1/address/"+a.addressType+"/suggest",l={};l.q=t,!1!==a.onSearchStart.call(i.element,l)&&(s=r+"?"+e.param(l||{}),(n=i.cachedResponse[s])&&Array.isArray(n)?(i.suggestions=n,i.suggest(),a.onSearchComplete.call(i.element,t,i.suggestions)):i.isBadQuery(t)?(this.noSuggestions(),a.onSearchComplete.call(i.element,t,[])):(i.abortAjax(),o.addClass("process"),i.currentRequest=e.ajax({url:r,data:l,type:"GET",dataType:"text"}).done((function(e){var n;i.currentRequest=null,n=a.transformResult(e,t),i.processResponse(n,t,s),a.onSearchComplete.call(i.element,t,n.suggestions),o.removeClass("process")})).fail((function(e,n,s){a.onSearchError.call(i.element,t,e,n,s),o.removeClass("process")}))))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},containerShow:function(){var t=e(this.suggestionsContainer);t.show(),t.addClass("active"),this.el.addClass("active"),this.visible=!0},containerHide:function(){var t=this,n=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,n),t.visible=!1,t.selectedIndex=-1,clearTimeout(t.onChangeTimeout),n.hide(),t.onHint(null),n.removeClass("active"),this.el.removeClass("active")},suggest:function(){if(this.suggestions.length){var t,n=this,s=n.options,o=s.formatResult,i=n.getQuery(n.currentValue),a=n.classes.suggestion,r=n.classes.selected,l=e(n.suggestionsContainer),u=e(n.noSuggestionsContainer),c=s.beforeRender,d="";s.triggerSelectOnValidInput&&n.isExactMatch(i)?n.select(0):(e.each(n.suggestions,(function(n,r){e.isFunction(s.getGroup)&&(d+=function(e,n){var o=s.getGroup(e,n);return t===o?"":(t=o,s.formatGroup(e,t))}(r,i)),d+='<div class="'+a+'" title="'+r.address_value+'" data-index="'+n+'"><address>'+o(r,i,n)+"</address></div>"})),this.adjustContainerWidth(),u.detach(),l.find("."+s.itemsClass).html(d),e.isFunction(c)&&c.call(n.element,l,n.suggestions),n.fixPosition(),n.containerShow(),s.autoSelectFirst&&(n.selectedIndex=0,l.scrollTop(0),l.children("."+a).first().addClass(r)),n.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.containerHide()},noSuggestions:function(){var t=this,n=t.options,s=n.beforeRender,o=e(t.suggestionsContainer),i=e(t.noSuggestionsContainer);this.adjustContainerWidth(),i.detach(),o.find("."+n.itemsClass).empty(),o.prepend(i),e.isFunction(s)&&s.call(t.element,o,t.suggestions),t.fixPosition(),this.containerShow()},adjustContainerWidth:function(){var t,n=this,s=n.options,o=e(n.suggestionsContainer);"auto"===s.width?(t=n.el.outerWidth(),o.css("width",t>0?t:300)):"flex"===s.width&&o.css("width","")},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),s=null;n&&(e.each(t.suggestions,(function(e,t){var o=0===t.address_value.toLowerCase().indexOf(n);return o&&(s=t),!o})),t.onHint(s))},onHint:function(t){var n=this,s=n.options.onHint,o="";t&&(o=n.currentValue+t.address_value.substr(n.currentValue.length)),n.hintValue!==o&&(n.hintValue=o,n.hint=t,e.isFunction(s)&&s.call(n.element,o))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,(function(e){return{value:e,data:null}})):t},validateOrientation:function(t,n){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=n),t},processResponse:function(e,t,n){var s=this,o=[],i=s.options;o=e.data?e.data.items:[],o=s.verifySuggestionsFormat(o),i.noCache||(s.cachedResponse[n]=o,i.preventBadQueries&&!o.length&&s.badQueries.push(t)),t===s.getQuery(s.currentValue)&&(s.suggestions=o,s.suggest())},activate:function(t){var n,s=this,o=s.classes.selected,i=e(s.suggestionsContainer),a=i.find("."+s.classes.suggestion);return i.find("."+o).removeClass(o),s.selectedIndex=t,-1!==s.selectedIndex&&a.length>s.selectedIndex?(n=a.get(s.selectedIndex),e(n).addClass(o),n):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){this.containerHide(),this.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children("."+t.classes.suggestion).first().removeClass(t.classes.selected),t.selectedIndex=-1,t.ignoreValueChange=!1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,s=n.activate(t);if(s){var o,i,a,r=e(s).outerHeight();o=s.offsetTop,a=(i=e(n.suggestionsContainer).scrollTop())+n.options.maxHeight-r,o<i?e(n.suggestionsContainer).scrollTop(o):o>a&&e(n.suggestionsContainer).scrollTop(o-n.options.maxHeight+r),n.options.preserveInput||(n.ignoreValueChange=!0,n.el.val(n.getValue(n.suggestions[t].value))),n.onHint(null)}},onSelect:function(t){var n=this,s=n.options.onSelect,o=n.suggestions[t];n.currentValue=n.getValue(o.address_value),n.currentValue===n.el.val()||n.options.preserveInput||n.el.val(n.currentValue),n.onHint(null),n.suggestions=[],n.selection=o,e.isFunction(s)&&s.call(n.element,o)},getValue:function(e){var t,n,s=this.options.delimiter;return s?1===(n=(t=this.currentValue).split(s)).length?e:t.substr(0,t.length-n[n.length-1].length)+e:e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.devbridgeAutocomplete=function(t,n){var s="autocomplete";return arguments.length?this.each((function(){var o=e(this),i=o.data(s);"string"==typeof t?i&&"function"==typeof i[t]&&i[t](n):(i&&i.dispose&&i.dispose(),i=new u(this,t),o.data(s,i))})):this.first().data(s)},e.fn.autocomplete||(e.fn.autocomplete=e.fn.devbridgeAutocomplete)},void 0===(i=s.apply(t,o))||(e.exports=i)}()},311:e=>{"use strict";e.exports=jQuery}},t={};!function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}(77)})();